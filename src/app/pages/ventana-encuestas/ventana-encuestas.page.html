<ion-header class="custom-header">
  <ion-toolbar class="header-toolbar" color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/detalle-emp"></ion-back-button>
    </ion-buttons>
    <ion-title class="header-title">
      <div class="university-header">
        <h1>UNIVERSIDAD UNIANDES</h1>
        <p>Centro de Emprendimientos</p>
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="encuestas-content">
  <div class="content-container">
    <!-- Título principal -->
    <div class="main-title">
      <h2>ENCUESTAS</h2>
      <div class="title-underline"></div>
    </div>

    <!-- Tarjeta Encuesta ICE -->
    <ion-card class="survey-card">
      <ion-card-content>
        <div class="survey-header">
          <ion-avatar class="survey-icon ice-icon">
            <ion-icon name="document-text-outline"></ion-icon>
          </ion-avatar>
          <div class="survey-info">
            <h3>ENCUESTA ICE</h3>
            <div class="survey-meta">
              <span class="status">Estado: Disponible</span>
              <span class="duration">
                <ion-icon name="time-outline"></ion-icon>
                Duración: 5-10 min
              </span>
            </div>
          </div>
        </div>

        <div class="survey-actions">
          <ion-button
            class="primary-button"
            (click)="handleSurveySelection('ice')"
          >
            <ion-icon name="play-outline" slot="start"></ion-icon>
            INICIAR
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Tarjeta Encuesta IEPM -->
    <ion-card class="survey-card">
      <ion-card-content>
        <div class="survey-header">
          <ion-avatar class="survey-icon iepm-icon">
            <ion-icon name="clipboard-outline"></ion-icon>
          </ion-avatar>
          <div class="survey-info">
            <h3>ENCUESTA IEPM</h3>
            <div class="survey-meta">
              <span class="status">Estado: Disponible</span>
              <span class="duration">
                <ion-icon name="time-outline"></ion-icon>
                Duración: 8-12 min
              </span>
            </div>
          </div>
        </div>

        <div class="survey-actions">
          <ion-button
            class="primary-button"
            (click)="handleSurveySelection('iepm')"
          >
            <ion-icon name="play-outline" slot="start"></ion-icon>
            INICIAR
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Botón de Resultados -->
    <ion-button class="results-button" expand="block" (click)="goToResults()">
      <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
      REVISAR RESULTADOS
    </ion-button>

    <ion-button
      (click)="goToDetails()"
      fill="outline"
      color="primary"
      expand="block"
    >
      <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
      Regresar a Detalles
    </ion-button>


   <!-- Modal de Confirmación CORREGIDO -->
    <ion-modal
      [isOpen]="showModal"
      (didDismiss)="onModalDidDismiss()"
      backdropDismiss="false"
    >
      <ng-template>
        <div class="modal-content">
          <div class="modal-header">
            <h3>Confirmación</h3>
          </div>
          <div class="modal-body">
            <p>
              ¿Estás seguro que deseas comenzar la encuesta {{ selectedSurvey
              === 'ice' ? 'ICE' : 'IEPM' }}?
            </p>
            <p>
              Una vez iniciada, deberás completarla para obtener resultados.
            </p>
          </div>
          <div class="modal-footer">
            <ion-button
              class="cancel-button"
              fill="outline"
              (click)="closeModal()"
            >
              CANCELAR
            </ion-button>
            <ion-button class="confirm-button" (click)="proceedToSurvey()">
              CONFIRMAR
            </ion-button>
          </div>
        </div>
      </ng-template>
    </ion-modal>
  </div>
</ion-content>